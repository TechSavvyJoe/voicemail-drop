(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7452],{19461:(e,t,r)=>{Promise.resolve().then(r.bind(r,96486))},96486:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(95155),a=r(12115),l=r(41046),i=r(76408),d=r(35169),o=r(29869),n=r(85339),c=r(40646),m=r(30285),x=r(99437),h=r(6874),b=r.n(h);function p(){let[e,t]=(0,a.useState)([]),[r,h]=(0,a.useState)("idle"),[p,u]=(0,a.useState)(""),[g,f]=(0,a.useState)([]),N=async e=>{h("processing"),u(""),f([]);try{let r=await e.text(),s=[];if(e.name.endsWith(".csv")){let e=r.split("\n"),t=e[0].split(",").map(e=>e.trim().toLowerCase());for(let r=1;r<e.length;r++)if(e[r].trim()){let a=e[r].split(","),l={};t.forEach((e,t)=>{var r;l[e]=(null==(r=a[t])?void 0:r.trim())||""}),s.push(l)}}else if(e.name.endsWith(".xlsx")||e.name.endsWith(".xls")){u("Excel files are not yet supported. Please use CSV format."),h("error");return}let a=[],l=[];s.forEach((e,t)=>{let r={firstName:e.firstname||e["first name"]||e.first||"",lastName:e.lastname||e["last name"]||e.last||"",phoneNumber:e.phone||e.phonenumber||e["phone number"]||e.mobile||"",email:e.email||"",vehicleInterest:e.vehicle||e.interest||e["vehicle interest"]||"",lastContact:e.lastcontact||e["last contact"]||""};r.firstName||l.push("Row ".concat(t+2,": First name is required")),r.lastName||l.push("Row ".concat(t+2,": Last name is required")),r.phoneNumber?/^\+?[\d\s\-\(\)]+$/.test(r.phoneNumber)||l.push("Row ".concat(t+2,": Invalid phone number format")):l.push("Row ".concat(t+2,": Phone number is required")),(0===l.length||0===l.filter(e=>e.includes("Row ".concat(t+2))).length)&&a.push(r)}),l.length>0?(f(l),h("error")):(t(a),h("success"))}catch(e){u("Failed to process file. Please check the format and try again."),h("error")}},y=(0,a.useCallback)(e=>{e.length>0&&N(e[0])},[]),{getRootProps:j,getInputProps:w,isDragActive:v}=(0,l.VB)({onDrop:y,accept:{"text/csv":[".csv"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1});return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,s.jsx)(x.p,{}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-md bg-white/70 border border-white/50 rounded-2xl p-8 mb-8 shadow-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)(b(),{href:"/customers",children:(0,s.jsxs)(m.$,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-white/80 hover:bg-white/90 border-gray-200/50 backdrop-blur-sm",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),"Back to Customers"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-indigo-800 bg-clip-text text-transparent mb-2",children:"Upload Customer List"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:"Import customer data from CSV or Excel files"})]})]})}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:["idle"===r&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"backdrop-blur-md bg-white/70 border border-white/50 rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Upload Customer Data"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium text-lg",children:"Upload a CSV or Excel file containing your customer information"})]}),(0,s.jsxs)("div",{...j(),className:"border-2 border-dashed rounded-2xl p-12 text-center cursor-pointer transition-all ".concat(v?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-lg":"border-gray-300 hover:border-blue-400 hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/50"),children:[(0,s.jsx)("input",{...w()}),(0,s.jsx)(o.A,{className:"h-16 w-16 mx-auto mb-6 ".concat(v?"text-blue-600":"text-gray-400")}),v?(0,s.jsx)("p",{className:"text-blue-700 text-xl font-bold",children:"Drop the file here..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-700 mb-3 text-lg font-medium",children:"Drag and drop your file here, or click to select"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Supports CSV and Excel files (up to 10MB)"})]})]}),(0,s.jsx)("div",{className:"mt-8 backdrop-blur-sm bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200/50 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Required Columns:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2 font-medium",children:[(0,s.jsx)("li",{children:"• First Name"}),(0,s.jsx)("li",{children:"• Last Name"}),(0,s.jsx)("li",{children:"• Phone Number"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900 mb-3 text-lg",children:"Optional Columns:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2 font-medium",children:[(0,s.jsx)("li",{children:"• Email"}),(0,s.jsx)("li",{children:"• Vehicle Interest"}),(0,s.jsx)("li",{children:"• Last Contact Date"})]})]})]})})]}),"processing"===r&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-md bg-white/70 border border-white/50 rounded-2xl shadow-xl p-12 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Processing File..."}),(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:"Please wait while we validate and import your customer data"})]}),"error"===r&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-md bg-white/70 border border-white/50 rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-red-500 to-pink-600 text-white shadow-lg mr-4",children:(0,s.jsx)(n.A,{className:"h-8 w-8"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Error"})]}),p&&(0,s.jsx)("div",{className:"backdrop-blur-sm bg-gradient-to-r from-red-500/10 to-pink-500/10 border border-red-200/50 rounded-xl p-6 mb-6",children:(0,s.jsx)("p",{className:"text-red-800 font-medium",children:p})}),g.length>0&&(0,s.jsxs)("div",{className:"backdrop-blur-sm bg-gradient-to-r from-red-500/10 to-pink-500/10 border border-red-200/50 rounded-xl p-6 mb-6",children:[(0,s.jsx)("h3",{className:"font-bold text-red-800 mb-3 text-lg",children:"Validation Errors:"}),(0,s.jsx)("ul",{className:"text-red-700 text-sm space-y-2 font-medium",children:g.map((e,t)=>(0,s.jsxs)("li",{children:["• ",e]},t))})]}),(0,s.jsx)(m.$,{onClick:()=>{h("idle"),u(""),f([])},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white border-0 font-bold",children:"Try Again"})]}),"success"===r&&e.length>0&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"backdrop-blur-md bg-white/70 border border-white/50 rounded-2xl shadow-xl",children:[(0,s.jsxs)("div",{className:"p-8 border-b border-white/50",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg mr-4",children:(0,s.jsx)(c.A,{className:"h-8 w-8"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Successful"})]}),(0,s.jsxs)("p",{className:"text-gray-600 font-medium text-lg",children:["Successfully imported ",e.length," customers"]})]}),(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)("div",{className:"overflow-x-auto backdrop-blur-sm bg-white/50 rounded-xl border border-gray-200/50",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200/50",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Phone"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Vehicle Interest"})]})}),(0,s.jsx)("tbody",{className:"bg-white/30 divide-y divide-gray-200/50",children:e.slice(0,10).map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-white/50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:e.phoneNumber}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:e.email||"N/A"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:e.vehicleInterest||"N/A"})]},t))})]})}),e.length>10&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 font-medium mt-6 text-center",children:["Showing first 10 customers. Total: ",e.length]})]}),(0,s.jsxs)("div",{className:"px-8 py-6 bg-gradient-to-r from-gray-50 to-blue-50 rounded-b-2xl flex justify-between items-center border-t border-white/50",children:[(0,s.jsx)(m.$,{variant:"ghost",onClick:()=>{h("idle"),t([])},className:"text-gray-600 hover:text-gray-800 bg-white/70 hover:bg-white/90",children:"Upload Another File"}),(0,s.jsx)(b(),{href:"/campaigns/new",children:(0,s.jsx)(m.$,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white border-0 font-bold",children:"Create Campaign"})})]})]})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3625,1859,3594,2493,5477,8826,5345,9437,8441,1684,7358],()=>t(19461)),_N_E=e.O()}]);